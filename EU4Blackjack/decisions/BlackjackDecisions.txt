country_decisions = {
	blackjack_start_game = {
		major = yes
		potential = {
			NOT = { has_global_flag = blackjack_game_in_progress_flag }
			ROOT = { NOT = { ai = yes } }
		}
		allow = {
			hidden_trigger = {
				NOT = { has_global_flag = blackjack_game_in_progress_flag }
				ROOT = { NOT = { ai = yes } }
			}
		}
		effect = {
			hidden_effect = {
				# Set country flag
				set_country_flag = blackjack_is_player

				# Set shuffling flag
				set_global_flag = blackjack_initial_setup_shuffle
				
				set_global_flag = blackjack_game_in_progress_flag

				# save player as player 1
				ROOT = {
					save_global_event_target_as = blackjack_player_1_tag
				}

				# If this is a singleplayer game, just fill the slots with ai
				if = {
					limit = {
						singleplayer_trigger = yes
					}
					assign_blackjack_ais = yes
				} else = {
					# else this is mp, try to assign other players
					assign_blackjack_players = yes
				}

				# assign_blackjack_players also leads to assign_blackjack_ais
				# but it goes through events first to ask other players
				# therefore, the reamining of game flow control is deferred to assign_blackjack_ais
				# :)
			}
		}
	}

	blackjack_view_gamestate = {
		major = yes
		potential = {
			has_global_flag = blackjack_game_in_progress_flag
			has_global_flag = blackjack_see_gamestate_enabled
			has_country_flag = blackjack_is_player
			ROOT = { NOT = { ai = yes } }
		}
		allow = {
			hidden_trigger = {
				has_global_flag = blackjack_game_in_progress_flag
				has_global_flag = blackjack_see_gamestate_enabled
				has_country_flag = blackjack_is_player
				ROOT = { NOT = { ai = yes } }
			}
		}
		effect = {
			hidden_effect = {
				country_event = {
					id = blackjack.6
				}
			}
		}
	}

	z_blackjack_debug_decision = {
		major = yes
		potential = {
			has_global_flag = blackjack_game_in_progress_flag
			has_global_flag = blackjack_see_gamestate_enabled
			has_country_flag = blackjack_is_player
			ROOT = { NOT = { ai = yes } }
		}
		allow = {
			hidden_trigger = {
				has_global_flag = blackjack_game_in_progress_flag
				has_global_flag = blackjack_see_gamestate_enabled
				has_country_flag = blackjack_is_player
				ROOT = { NOT = { ai = yes } }
			}
		}
		effect = {
			custom_tooltip = blackjack_debug_decision_tooltip
		}
	}
}
